
# Loads default set of integrations. Do not remove.
default_config:

switch:
  - platform: wake_on_lan
    mac: {{ pc_mac }}
    broadcast_address: 10.6.255.255

media_player:
  - platform: pjlink
    host: projector.lab.nkontur.com
  - platform: snapcast
    host: snapserver.lab.nkontur.com

# Text to speech
tts:
  - platform: google_translate

automation: !include automations.yaml
script: !include scripts.yaml
scene: !include scenes.yaml
http:
  use_x_forwarded_for: true
  trusted_proxies:
    - {{ nginx_ip }}
    - {{ lab_nginx_ip }}
    - {{ iot_nginx_ip }}
    - 127.0.0.1
spotcast:
  sp_dc: "{{ lookup('env', 'SPOTIFY_DC') }}"
  sp_key: "{{ lookup('env', 'SPOTIFY_KEY') }}"

mqtt:
  certificate: auto

shell_command:
  sound_doorbell: cat /config/sounds/doorbell-1.wav | nc {{ snapserver_address }} 80

customize:
    device_tracker.noah_phone:
      source_type: router

recorder:
  purge_keep_days: 1000

device_tracker:
- platform: ping
  hosts:
    noah_phone: Galaxy-S10e.lab.nkontur.com

rest_command:
  bass_boost:
    url: "http://zwave.lab.nkontur.com:5380/devices/0/config"
    method: POST
    headers:
      Content-Type: application/json
    payload: {{ '\'{ "master_status": { "preset": {% if is_state("input_boolean.bass_boost", "off")%}0{%else%}1{%endif%} } }\'' }}
