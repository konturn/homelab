{
  "gateway": {
    "mode": "local",
    "auth": {
      "mode": "token",
      "token": "{{ lookup('env', 'MOLTBOT_GATEWAY_TOKEN') }}"
    },
    "trustedProxies": [
      "10.3.32.1"
    ],
    "controlUi": {
      "allowInsecureAuth": true
    }
  },
  "channels": {
    "telegram": {
      "enabled": true
    }
  },
  "auth": {
    "profiles": {
      "anthropic:manual": {
        "provider": "anthropic",
        "mode": "token"
      },
      "anthropic:fallback": {
        "provider": "anthropic",
        "mode": "token"
      }
    }
  },
  "agents": {
    "defaults": {
      "memorySearch": {
        "enabled": true,
        "sources": [
          "memory",
          "sessions"
        ],
        "provider": "local",
        "query": {
          "hybrid": {
            "enabled": true,
            "temporalDecay": {
              "enabled": true,
              "halfLifeDays": 90
            },
            "mmr": {
              "enabled": true,
              "lambda": 0.7
            }
          }
        },
        "sync": {
          "watch": true,
          "onSessionStart": true
        }
      },
      "models": {
        "anthropic/claude-opus-4-6": {
          "alias": "opus",
          "params": {
            "cacheRetention": "short",
            "context1m": true
          }
        },
        "anthropic/claude-opus-4-5": {
          "alias": "opus",
          "params": {
            "cacheRetention": "short",
            "context1m": true
          }
        }
      }
    }
  },
  "hooks": {
    "enabled": true,
    "path": "/hooks",
    "transformsDir": "/home/node/.openclaw/hooks/transforms",
    "mappings": [
      {
        "action": "wake",
        "name": "grafana",
        "transform": {
          "module": "grafana.js"
        }
      }
    ]
  },
  "agent": {
    "contextPruning": {
      "mode": "cache-ttl",
      "ttl": "5m",
      "keepLastAssistants": 3,
      "tools": {
        "allow": [
          "exec",
          "Read",
          "process",
          "web_fetch",
          "web_search"
        ],
        "deny": [
          "image*"
        ]
      }
    }
  }
}
