# Extract individual fields from a Vault KV v2 response into Ansible facts.
# Called from main.yml for each Vault path response.

- name: "Set facts from {{ _vault_response.item.path }}"
  ansible.builtin.set_fact:
    "{{ item.key }}": "{{ _vault_response.json.data.data[item.value] }}"
  loop: "{{ _vault_response.item.fields | dict2items }}"
  loop_control:
    label: "{{ item.key }}"
  no_log: true
